
version: v2
plugins:
  - local: protoc-gen-go
  # - remote: github.com/golang/protobuf/protoc-gen-go:v1.5.4
    out: internal/pkg/proto
    opt: paths=source_relative

  - local: protoc-gen-go-grpc
  # - remote: google.golang.org/grpc/cmd/protoc-gen-go-grpc:v1.5.1
    out: internal/pkg/proto
    opt:
      - paths=source_relative
      - require_unimplemented_servers=false

  - local: protoc-gen-connect-go
  # - remote: connectrpc.com/connect/cmd/protoc-gen-connect-go:v1.17.0
    out: internal/pkg/proto
    opt:
      - paths=source_relative

  - local: protoc-gen-connect-openapi
  # - remote: github.com/sudorandom/protoc-gen-connect-openapi:v0.15.2
    out: assets/docs/ref
    strategy: all
    opt:
    - allow-get
    - format=yaml
    - path=listah/v1/openapi-ref.yaml
inputs:
  - directory: proto

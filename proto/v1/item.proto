syntax = "proto3";
package listah.v1;


option go_package = "cornucopia/listah/apps/api/internal/pkg/proto/v1";


import "v1/commons.proto";
import "google/protobuf/timestamp.proto";
import "gnostic/openapi/v3/annotations.proto";




message Item {
  string id = 1;
  string user_id = 2 [json_name = "userId"];
  string title = 3;
  optional string description = 4;
  optional string note = 5;
  repeated string tag = 6;
  optional bool soft_delete = 7;
  optional google.protobuf.Timestamp reactivate_at = 100 [json_name = "reactivateAt"];
  optional AuditUpdaterEnum updated_by = 500 [json_name = "updated_by"];
  optional google.protobuf.Timestamp updated_at = 501 [json_name = "updated_at"];
}



message Category {
  string category = 1;
  int32 row_count = 2 [json_name = "rowCount"];
}




message ItemServiceReadItemRequest {
  string userId = 500 [json_name = "userId"];
  repeated string filter = 501;
  string searchQuery = 502 [json_name = "searchQuery"];
  int32 pageSize = 1000 [json_name = "pageSize"];
  int32 pageNumber = 1001 [json_name = "pageNumber"];
  string sortQuery = 1002 [json_name = "sortQuery"];
}
message ItemServiceReadItemResponse {
  repeated Item items = 1;

  string userId = 500 [json_name = "userId"];
  repeated string filter = 501;
  string searchQuery = 502 [json_name = "searchQuery"];
  int32 pageSize = 1000 [json_name = "pageSize"];
  int32 pageNumber = 1001 [json_name = "pageNumber"];
  string sortQuery = 1002 [json_name = "sortQuery"];
}


message ItemServiceReadCategoryRequest {
  string userId = 500 [json_name = "userId"];
  repeated string filter = 501;
  string searchQuery = 502 [json_name = "searchQuery"];
  int32 pageSize = 1000 [json_name = "pageSize"];
  int32 pageNumber = 1001 [json_name = "pageNumber"];
  string sortQuery = 1002 [json_name = "sortQuery"];
}
message ItemServiceReadCategoryResponse {
  repeated Category categories = 1;

  string userId = 500 [json_name = "userId"];
  repeated string filter = 501;
  string searchQuery = 502 [json_name = "searchQuery"];
  int32 pageSize = 1000 [json_name = "pageSize"];
  int32 pageNumber = 1001 [json_name = "pageNumber"];
  string sortQuery = 1002 [json_name = "sortQuery"];
}

message ItemServiceUpsertRequest {
  repeated Item items = 1;
}
message ItemServiceUpsertResponse {
  repeated string item_ids = 1;
}


service ItemService {
  rpc ReadItem(ItemServiceReadItemRequest) returns (ItemServiceReadItemResponse){
    option idempotency_level = NO_SIDE_EFFECTS;
    option (gnostic.openapi.v3.operation).description = "Read Item";
  }
  rpc ReadCategory(ItemServiceReadCategoryRequest) returns (ItemServiceReadCategoryResponse){
    option idempotency_level = NO_SIDE_EFFECTS;
    option (gnostic.openapi.v3.operation).description = "Read Category";
  }

  rpc Upsert(ItemServiceUpsertRequest) returns (ItemServiceUpsertResponse){
    option (gnostic.openapi.v3.operation).description = "Upsert Item";
  }

}
